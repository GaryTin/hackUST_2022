{% load static %}

<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cusComment</title>
    <link rel="stylesheet" href="{% static 'SharpBargain/styles/dashboard.css' %}">
    <link rel="stylesheet" href="{% static 'SharpBargain/styles/comment.css' %}">
    <link rel="stylesheet" href="{% static 'SharpBargain/styles/search.css' %}">
    <link rel="stylesheet" href="{% static 'SharpBargain/styles/item_info.css' %}">
    <link rel="stylesheet" href="{% static 'SharpBargain/styles/rate.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="shortcut icon" type="image/png" href="{% static 'favicon.ico' %}"/>
</head>
<body>
    <ul>
        <li><img src="{% static 'SharpBargain/media/logo.png' %}" class="logo"></li>
        <li><a href="" id="home="><i class="fa fa-home" aria-hidden="true"></i> Home</a></li>
        <li><a href="{% url 'cusHistory' %}"><i class="fa fa-history" aria-hidden="true"></i> History</a></li>
        <li><a href="{% url 'cusView' %}"><i class="fa fa-eye" aria-hidden="true"></i> View</a></li>
        <li><a href="{% url 'cusComment' %}" class="selected"><i class="fa fa-comment" aria-hidden="true"></i> Comment</a></li>
        <li><a href="{% url 'index' %}"><i class="fa fa-sign-out" aria-hidden="true"></i> Logout</a></li>
    </ul>

<div class="main_content">
    <div class="comment_container">
         <div class="title_container">
            <p class="title">Comment System</p>
        </div>

        <div class="search_section">
            <span class="field_des_search">Search by ID</span>
            <input type="text" id="pid" name="pid" class="search">
            <input type="submit" value="Search" class="btn_search">
            <br>
        </div>

        <table id="info_table">
            {% include 'SharpBargain/includes/history_table.html' with prod_type="test_type" prod_id="123456" date="00/00/0000" not_comment=true %}
        </table>

        <div class="comment_section">
            <form action="" name="form" onsubmit="return valid()">
                <span class="field_des_comment">Comment Section</span><br>

                 <div class="submit_pos">
                    <div class="rate">
                        <input class="star star5" id="star5" type="radio" name="star">
                        <label class="star star5" for="star5"></label>
                        <input class="star star4" id="star4" type="radio" name="star">
                        <label class="star star4" for="star4"></label>
                        <input class="star star3" id="star3" type="radio" name="star">
                        <label class="star star3" for="star3"></label>
                        <input class="star star2" id="star2" type="radio" name="star">
                        <label class="star star2" for="star2"></label>
                        <input class="star star1" id="star1" type="radio" name="star">
                        <label class="star star1" for="star1"></label>
                    </div>
                </div>
                <div class="comment_pos">
                    <textarea id="comment_content" name="comment_content" class="comment_content" maxlength="500"></textarea><br>
                </div>

                <div class="submit_pos">
                    <input type="submit" value="Submit" class="btn_submit">
                </div>
            </form>
        </div>



    </div>
</div>


</body>

<script>
    function valid(){
        let x = document.forms["form"]["comment_content"].value;
        var s1 = document.getElementById('star1').checked
        var s2 = document.getElementById('star2').checked
        var s3 = document.getElementById('star3').checked
        var s4 = document.getElementById('star4').checked
        var s5 = document.getElementById('star5').checked

        if ((s1 == false && s2 == false && s3 == false && s4 == false && s5 == false)||(x == ""))  {
            alert("Your comment section/rating cannot be empty.");
            return false;
        }
    }
</script>
<script>
    var ac;
    async function get_accounts()
    {
        const accounts = await ethereum.request({ method: 'eth_accounts' });
        return accounts;
    }
    get_accounts().then(
        function (value)
            {
                var new_href = "{% url "cusDashboard" 1234 %}".replace(/1234/,value[0].toString());
                document.getElementById("home").href=new_href;
            }
    );


</script>
</html>